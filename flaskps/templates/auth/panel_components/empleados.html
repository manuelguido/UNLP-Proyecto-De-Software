{% extends "auth/panel.html" %}
{% block contenttitle %}
<i class="fas fa-user-friends black3 mr-2"></i>Empleados
{% endblock %}
{% block contentitem %}
        <div class="row">
            <div class="col-md-6 mb-3">
                <h2 class="h4 black2">Docentes</h2>
                <hr>
                {% for p in permisos %}
                {% if p.nombre == 'docente_new' %}
                <button type="button" class="btn btn-success pull-right" data-toggle="modal" data-target="#docenteCreate">
                    <i class="fas fa-user-plus mr-2"></i> Nuevo Docente
                </button>
                {% endif %}
                {% endfor %}
            </div>
        </div>
        <div class="row">
            <div class="col-md-6">
                <div class="table-responsive">
                    <table class="table table-striped">
                        <!-- Row Titulos -->
                        <tr>
                            <th>Apellido</th>
                            <th>Nombre</th>
                            <th>Teléfono</th>
                            <th class="text-center">Acciones</th>
                        </tr>
                        <!-- Row Docentes -->
                        {% for row in docentes %}
                        <tr>
                            <td>{{row.apellido}}</td>
                            <td>{{row.nombre}}</td>
                            <td>{{row.tel}}</td>
                            <td class="text-center">
                                {% for p in permisos %}
                                {% if p.nombre == 'docente_show' %}
                                <!-- Ver estudiante -->
                                <a class="btn btn-success btn-sm" data-toggle="modal" data-target="#docenteShow{{row.id}}"><i class="fas fa-eye mr-2"></i>Ver</a>
                                {% endif %}
                                {% endfor %}
                                {% for p in permisos %}
                                {% if p.nombre == 'docente_update' %}
                                <a href="/update_docente/{{row.id}}" class="btn btn-warning btn-sm" data-toggle="modal" data-target="#docenteEdit{{row.id}}"><i class="fas fa-edit mr-2"></i>Editar</a>
                                {% endif %}
                                {% endfor %}
                                {% for p in permisos %}
                                {% if p.nombre == 'docente_destroy' %}
                                <a href="/delete_docente/{{row.id}}" class="btn btn-danger btn-sm" onclick="return confirm('Are You Sure For Delete?')"><i class="fas fa-user-minus mr-2"></i>Eliminar</a>
                                {% endif %}
                                {% endfor %}
                            </td>
                        </tr>

                        {% for p in permisos %}
                        {% if p.nombre == 'docente_show' %}
                        <div id="docenteShow{{row.id}}" class="modal fade" role="dialog">
                            <div class="modal-dialog">
                                <div class="modal-content">
                                    <div class="modal-header">
                                        <h4 class="modal-title">Docente</h4>
                                        <button type="button" class="close" data-dismiss="modal">&times;</button>
                                    </div>
                                    <div class="modal-body">
                                        <div class="row">
                                            <div class="col-md-12">
                                                <p class="mb-2">Nombre: {{row.nombre}}</p>
                                                <p class="mb-2">Apellido: {{row.apellido}}</p>
                                                <p class="mb-2">Fecha de nacimiento: {{row.fecha_nac}}</p>
                                                <p class="mb-2">Localidad: {{row.localidad_id}}</p>
                                                <p class="mb-2">Domicilio: {{row.domicilio}}</p>
                                                <p class="mb-2">
                                                    {% for genero in generos %}
                                                    {% if genero.id == row.genero_id %}
                                                        Genero: {{genero.nombre}}
                                                    {% endif %}
                                                    {% endfor %}
                                                </p>
                                                <p class="mb-2">Documento: {{row.numero}}</p>
                                                <p class="mb-2">Telefono: {{row.tel}}</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        {% endif %}
                        {% endfor %}

                        {% for p in permisos %}
                        {% if p.nombre == 'docente_update' %}
                        <div id="docenteEdit{{row.id}}" class="modal fade" role="dialog">
                            <div class="modal-dialog">
                                <div class="modal-content">
                                    <div class="modal-header">
                                        <h4 class="modal-title">Actualizar</h4>
                                        <button type="button" class="close" data-dismiss="modal">&times;</button>
                                    </div>
                                    <div class="modal-body">
                                        <form action="{{ url_for('update_docente') }}" method="POST">        
                                            <input type="hidden"  name="id" value="{{row.id}}">
                                            <!-- Nombre y apellido -->
                                            <div class="form-group row">
                                                <div class="col-md-6">
                                                    <label>Apellido</label>
                                                    <input type="text" class="form-control" value="{{row.apellido}}" placeholder="Apellido" name="apellido" required="1">
                                                </div>
                                                <div class="col-md-6">
                                                    <label>Nombre</label>
                                                    <input type="text" class="form-control" value="{{row.nombre}}" placeholder="Nombre" name="nombre" required="1">
                                                </div>
                                            </div>
                
                                            <!-- Fecha de nacimiento y localidad -->
                                            <div class="form-group row">
                                                <div class="col-md-6">
                                                    <label>Fecha de nacimiento</label>
                                                    <input type="date" class="form-control" value="{{row.fecha_nac}}" name="fecha_nac" required="1">
                                                </div>
                                                <div class="col-md-6">
                                                    <label>Localidad</label>
                                                    <select name="localidad_id" class="localidades browser-default custom-select" required="1">

                                                    </select>
                                                </div>
                                            </div>
                
                                            <!-- Domicilio y genero -->
                                            <div class="form-group row">
                                                <div class="col-md-6">
                                                    <label>Domicilio</label>
                                                    <input type="text" min="0" class="form-control" value="{{row.domicilio}}" placeholder="Domicilio" name="domicilio" required="1">
                                                </div>
                                                <div class="col-md-6">
                                                    <label>Género</label>
                                                    <select name="genero_id" class="browser-default custom-select" required="1">
                                                        <option selected disabled>Genero</option>
                                                        {% for genero in generos %}
                                                        {% if genero.id == row.genero_id %}
                                                        <option value="{{genero.id}}" selected>{{genero.nombre}}</option>
                                                        {% else %}
                                                        <option value="{{genero.id}}">{{genero.nombre}}</option>
                                                        {% endif %}
                                                        {% endfor %}
                                                    </select>
                                                </div>
                                            </div>
                                                
                                            <!-- Documento -->
                                            <div class="form-group row">
                                                <div class="col-md-6">
                                                    <label>Tipo Documento</label>
                                                    <select name="tipo_doc_id" class="tipo_docs browser-default custom-select" required="1">
                                                        
                                                    </select>
                                                </div>
                                                <div class="col-md-6">
                                                    <label>Número</label>
                                                    <input type="number" min="0" class="form-control" value="{{row.numero}}" placeholder="Numero DNI" name="numero" required="1">
                                                </div>
                                            </div>
                                                
                                            <!-- Teléfono -->
                                            <div class="form-group row">
                                                <div class="col-md-6">
                                                    <label>Teléfono</label>
                                                    <input type="number" min="0" class="form-control" value="{{row.tel}}" placeholder="Telefono" name="tel" required="1">
                                                </div>
                                            </div>
                                            <hr>
                                            <div class="form-group row">
                                                <div class="col-md-6 text-left">
                                                    <button type="button" class="btn btn-light" data-dismiss="modal">Cancelar</button>
                                                </div>
                                                <div class="col-md-6 text-right">
                                                    <button class="btn btn-primary" type="sbumit">Actualizar</button>
                                                </div>
                                            </div>
                                        </form>
                                    </div>
                                </div>
                            </div>
                        </div>
                        {% endif %}
                        {% endfor %}
                        {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>

            {% for p in permisos %}
            {% if p.nombre == 'docente_new' %}
            <!-- Modal -->
            <div id="docenteCreate" class="modal fade" role="dialog">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h4 class="modal-title">Ingresar datos</h4>
                            <button type="button" class="close" data-dismiss="modal">&times;</button>
                        </div>
                        <div class="modal-body px-4">
                            <form action="{{ url_for('insert_docente') }}" method="POST">

                                <!-- Nombre y apellido -->
                                <div class="form-group row">
                                    <div class="col-md-6">
                                        <label>Apellido</label>
                                        <input type="text" class="form-control" placeholder="Apellido" name="apellido" required="1">
                                    </div>
                                    <div class="col-md-6">
                                        <label>Nombre</label>
                                        <input type="text" class="form-control" placeholder="Nombre" name="nombre" required="1">
                                    </div>
                                </div>

                                <!-- Fecha de nacimiento y localidad -->
                                <div class="form-group row">
                                    <div class="col-md-6">
                                        <label>Fecha de nacimiento</label>
                                        <input type="date" class="form-control" name="fecha_nac" required="1">
                                    </div>
                                    <div class="col-md-6">
                                        <label>Localidad</label>
                                        <select name="localidad_id" class="localidades browser-default custom-select" required="1">
                                            
                                        </select>
                                    </div>
                                </div>

                                <!-- Domicilio y genero -->
                                <div class="form-group row">
                                    <div class="col-md-6">
                                        <label>Domicilio</label>
                                        <input type="text" min="0" class="form-control" placeholder="Domicilio" name="domicilio" required="1">
                                    </div>
                                    <div class="col-md-6">
                                        <label>Género</label>
                                        <select name="genero_id" class="browser-default custom-select" required="1">
                                            <option selected disabled>Seleccionar</option>
                                            {% for genero in generos %}
                                            <option value="{{genero.id}}">{{genero.nombre}}</option>
                                            {% endfor %}
                                        </select>
                                    </div>
                                </div>
                                
                                <!-- Documento -->
                                <div class="form-group row">
                                    <div class="col-md-6">
                                        <label>Tipo Documento</label>
                                        <select name="tipo_doc_id" class="tipo_docs browser-default custom-select" required="1">

                                        </select>
                                    </div>
                                    <div class="col-md-6">
                                        <label>Número</label>
                                        <input type="number" min="0" class="form-control" placeholder="Numero DNI" name="numero" required="1">
                                    </div>
                                </div>
                                
                                <!-- Teléfono -->
                                <div class="form-group row">
                                    <div class="col-md-6">
                                        <label>Teléfono</label>
                                        <input type="number" min="0" class="form-control" placeholder="Telefono" name="tel" required="1">
                                    </div>
                                </div>
                                <hr>
                                <div class="form-group row">
                                    <div class="col-md-6 text-left">
                                        <button type="button" class="btn btn-light black2" data-dismiss="modal">Cancelar</button>
                                    </div>
                                    <div class="col-md-6 text-right">
                                        <button class="btn btn-primary-dark white1" type="submit">Guardar</button>
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
            {% endif %}
            {% endfor %}
        </div>
        <script type="text/javascript" src="{{url_for('static', filename='js/jquery-3.2.1.min.js') }}"></script>
        <script type="text/javascript" src="{{url_for('static', filename = 'js/bootstrap.min.js')}}"></script>
{% endblock %}